<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/vuex@3/dist/vuex.js"></script>
    <title>
      external order tst
    </title>
  </head>


  <body>
    <div class="container">
      <div
        id="item"
        class="items"
        style="background-color: red; border: 1px solid blue; border-radius: 8px; cursor: pointer; width: 200px; height: 250px;" 
      >
        nome do plano

        R$ 69,90
      </div>
    </div>
  </body>
</html>

<script src="https://beta.hubdevendas.com/external-order/external-order.umd.js?client-key=key-cabonnet"></script>

<script>
async function sendOrder() {
  try {
    const response = await fetch("https://beta-neonfibra.hubdevendas.com/api/order", {
      method: "POST",
      headers: {
        "Accept": "application/json, text/plain, */*",
        "Content-Type": "application/json;charset=UTF-8",
        "Security-Key": "LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0K...", 
        "User-Device": JSON.stringify({
          platform: "Linux x86_64",
          browserName: "Netscape",
          browserVersion: "5.0",
          vendor: "Google Inc."
        }),
        "coordinates": JSON.stringify({
          latitude: -20.430247,
          longitude: -54.5690126,
          accuracy: 27.506
        }),
        "client-key": "key-cabonnet"
      },
    })

    if (!response.ok) {
      throw new Error("Erro: " + response.status)
    }

    const data = await response.json()
    console.log("Resposta:", data)

    const foo = document.getElementById("item");

    foo.addEventListener("click", () => {
      window.externalOrder.startOrderByPlan("mega")
    })

  } catch (err) {
    console.error("Erro na requisição:", err)
  }
}
</script>
